(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82309,e=>{"use strict";var s=e.i(77977),r=e.i(6339),a=e.i(26072),l=e.i(17495);function t({onCapture:e,isLoading:t=!1}){let i=(0,r.useRef)(null),n=(0,r.useRef)(null),[c,d]=(0,r.useState)(!0),[o,m]=(0,r.useState)(!1);return((0,r.useEffect)(()=>((async()=>{try{console.log("Requesting camera access...");let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});i.current&&(i.current.srcObject=e,d(!0))}catch(e){console.error("Camera access denied:",e),d(!1)}})(),()=>{i.current?.srcObject&&i.current.srcObject.getTracks().forEach(e=>e.stop())}),[]),!1===c)?(0,s.jsx)(l.Card,{className:"p-8 text-center",children:(0,s.jsx)("p",{className:"text-red-500 mb-4",children:"Camera permission denied. Please enable camera access in your browser settings."})}):null===c?(0,s.jsx)(l.Card,{className:"p-8 text-center",children:"Requesting camera access..."}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative rounded-lg overflow-hidden border-2 border-primary/30 bg-black",children:[(0,s.jsx)("video",{ref:i,autoPlay:!0,playsInline:!0,className:"w-full aspect-video object-cover"}),(0,s.jsx)("canvas",{ref:n,className:"hidden"}),(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,s.jsx)("div",{className:"w-64 h-24 border-2 border-yellow-400 rounded-lg opacity-75"})})})]}),(0,s.jsx)(a.Button,{onClick:()=>{if(n.current&&i.current){let s=n.current.getContext("2d");s&&(n.current.width=i.current.videoWidth,n.current.height=i.current.videoHeight,s.drawImage(i.current,0,0),e(n.current.toDataURL("image/jpeg")))}},disabled:t,className:"w-full bg-primary hover:bg-primary/90",size:"lg",children:t?"Processing...":"Capture License Plate"})]})}e.s(["CameraCapture",()=>t])},24265,e=>{"use strict";var s=e.i(77977),r=e.i(6339),a=e.i(26072),l=e.i(17495),t=e.i(82309);function i(){let[e,i]=(0,r.useState)("details"),[n,c]=(0,r.useState)({studentName:"",usn:"",hostelRoom:"",vehicleNumber:""}),[d,o]=(0,r.useState)(null),[m,u]=(0,r.useState)(!1),[x,h]=(0,r.useState)(""),g=e=>{let{name:s,value:r}=e.target;c(e=>({...e,[s]:r}))},p=async()=>{u(!0);try{(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,licensePlateImage:d})})).ok&&(h("Vehicle registered successfully!"),c({studentName:"",usn:"",hostelRoom:"",vehicleNumber:""}),o(null),i("details"),setTimeout(()=>h(""),3e3))}catch(e){console.error("Registration error:",e)}finally{u(!1)}};return(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-background to-muted py-12",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Register Your Vehicle"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Complete the registration process to allow your vehicle access to campus parking."})]}),(0,s.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,s.jsx)("div",{className:`flex-1 h-2 rounded-full ${"details"===e||"camera"===e||"preview"===e?"bg-primary":"bg-muted"}`}),(0,s.jsx)("div",{className:`flex-1 h-2 rounded-full ${"camera"===e||"preview"===e?"bg-primary":"bg-muted"}`}),(0,s.jsx)("div",{className:`flex-1 h-2 rounded-full ${"preview"===e?"bg-primary":"bg-muted"}`})]}),x&&(0,s.jsx)(l.Card,{className:"mb-8 p-4 bg-green-50 border-green-200",children:(0,s.jsx)("p",{className:"text-green-800",children:x})}),"details"===e&&(0,s.jsxs)(l.Card,{className:"p-8 space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Student Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),(0,s.jsx)("input",{type:"text",name:"studentName",value:n.studentName,onChange:g,placeholder:"Enter your full name",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"USN (University Serial Number)"}),(0,s.jsx)("input",{type:"text",name:"usn",value:n.usn,onChange:g,placeholder:"e.g., 1BM19CS001",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Hostel Room Number"}),(0,s.jsx)("input",{type:"text",name:"hostelRoom",value:n.hostelRoom,onChange:g,placeholder:"e.g., A-201",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Vehicle Number / Registration Plate"}),(0,s.jsx)("input",{type:"text",name:"vehicleNumber",value:n.vehicleNumber,onChange:g,placeholder:"e.g., KA01AB1234",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,s.jsx)(a.Button,{onClick:()=>i("camera"),disabled:!n.studentName||!n.usn||!n.hostelRoom||!n.vehicleNumber,className:"w-full bg-primary hover:bg-primary/90",size:"lg",children:"Next: Capture License Plate"})]}),"camera"===e&&(0,s.jsxs)(l.Card,{className:"p-8 space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Capture License Plate"}),(0,s.jsx)(t.CameraCapture,{onCapture:e=>{o(e),i("preview")},isLoading:m}),(0,s.jsx)(a.Button,{onClick:()=>i("details"),variant:"outline",className:"w-full",size:"lg",children:"Back"})]}),"preview"===e&&d&&(0,s.jsxs)(l.Card,{className:"p-8 space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Review & Confirm"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-muted p-6 rounded-lg space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Student Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Name"}),(0,s.jsx)("p",{className:"font-medium",children:n.studentName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"USN"}),(0,s.jsx)("p",{className:"font-medium",children:n.usn})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Hostel Room"}),(0,s.jsx)("p",{className:"font-medium",children:n.hostelRoom})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Vehicle Number"}),(0,s.jsx)("p",{className:"font-medium",children:n.vehicleNumber})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Captured License Plate"}),(0,s.jsx)("img",{src:d||"/placeholder.svg",alt:"License Plate",className:"w-full rounded-lg border border-border"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a.Button,{onClick:()=>i("camera"),variant:"outline",className:"flex-1",size:"lg",children:"Recapture"}),(0,s.jsx)(a.Button,{onClick:p,disabled:m,className:"flex-1 bg-primary hover:bg-primary/90",size:"lg",children:m?"Registering...":"Confirm Registration"})]})]})]})})}e.s(["default",()=>i])}]);