(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82309,e=>{"use strict";var s=e.i(77977),t=e.i(6339);function r({onCapture:e,isLoading:r=!1}){let a=(0,t.useRef)(null),n=(0,t.useRef)(null),[i,c]=(0,t.useState)(!1),[d,l]=(0,t.useState)(!1);if((0,t.useEffect)(()=>((async()=>{if("undefined"==typeof navigator||void 0===navigator.mediaDevices||void 0===navigator.mediaDevices.getUserMedia){console.warn("Camera API is not supported in this browser.  Please ensure your browser supports the camera API and that it is enabled."),l(!0),c(!1);return}try{console.log("Requesting camera access...");let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});a.current&&(a.current.srcObject=e,c(!0))}catch(e){console.error("Camera access denied:",e),e instanceof DOMException&&console.error("DOMException type:",e.name,e.message),c(!1)}})(),()=>{a.current?.srcObject&&a.current.srcObject.getTracks().forEach(e=>e.stop())}),[]),d){let e="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",t=e.includes("brave")&&e.includes("android");return(0,s.jsx)("div",{className:"p-8 text-center border rounded-md",children:(0,s.jsx)("p",{className:"text-red-500 mb-4",children:t?"Camera is not fully supported on this version of Brave for Android. Please try a different browser.":"Camera is not supported on this browser. Please use a different browser."})})}return i?null===i?(0,s.jsx)("div",{className:"p-8 text-center border rounded-md",children:"Requesting camera access..."}):(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"p-4 text-center border rounded-md space-y-4",children:[(0,s.jsx)("video",{ref:a,autoPlay:!0,playsInline:!0,className:"mx-auto rounded-md max-w-full"}),(0,s.jsx)("canvas",{ref:n,className:"hidden"}),(0,s.jsx)("button",{type:"button",onClick:()=>{if(n.current&&a.current){let s=n.current.getContext("2d");if(s){let t=(a.current.videoWidth-256)/2,r=(a.current.videoHeight-96)/2;n.current.width=256,n.current.height=96,s.drawImage(a.current,t,r,256,96,0,0,256,96),e(n.current.toDataURL("image/jpeg"))}}},disabled:r,className:"px-4 py-2 rounded-md border disabled:opacity-50",children:r?"Capturing...":"Capture"})]})}):(0,s.jsx)("div",{className:"p-8 text-center border rounded-md",children:(0,s.jsx)("p",{className:"mb-4",children:"Please allow camera permission in your browser."})})}e.s(["CameraCapture",()=>r])},94555,e=>{"use strict";var s=e.i(77977),t=e.i(6339),r=e.i(26072),a=e.i(17495),n=e.i(82309);function i(){let[e,i]=(0,t.useState)("scan"),[c,d]=(0,t.useState)(!1),[l,o]=(0,t.useState)(null),[m,u]=(0,t.useState)(!1),x=async e=>{d(!0),u(!1);try{let s=await fetch("/api/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licensePlateImage:e})}),t=await s.json();t.success&&t.student?o(t.student):u(!0),i("results")}catch(e){console.error("Scan error:",e),u(!0),i("results")}finally{d(!1)}};return(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-background to-muted py-12",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Vehicle Verification"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Scan a license plate to verify vehicle registration and view student details."})]}),"scan"===e&&(0,s.jsxs)(a.Card,{className:"p-8 space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Scan License Plate"}),(0,s.jsx)(n.CameraCapture,{onCapture:x,isLoading:c})]}),"results"===e&&(0,s.jsx)("div",{className:"space-y-6",children:m?(0,s.jsxs)(a.Card,{className:"p-8 text-center space-y-6 border-red-200 bg-red-50",children:[(0,s.jsx)("div",{className:"text-5xl",children:"❌"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-red-900 mb-2",children:"Vehicle Not Registered"}),(0,s.jsx)("p",{className:"text-red-700",children:"This license plate is not registered in our system. Please contact the parking office."})]}),(0,s.jsx)(r.Button,{onClick:()=>i("scan"),className:"w-full bg-primary hover:bg-primary/90",size:"lg",children:"Scan Another Plate"})]}):l?(0,s.jsxs)(a.Card,{className:"p-8 space-y-6 border-green-200 bg-green-50",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-5xl mb-2",children:"✅"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-green-900",children:"Vehicle Registered"})]}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Student Name"}),(0,s.jsx)("p",{className:"text-xl font-semibold text-foreground",children:l.studentName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"USN"}),(0,s.jsx)("p",{className:"text-xl font-semibold text-foreground",children:l.usn})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Hostel Room"}),(0,s.jsx)("p",{className:"text-xl font-semibold text-foreground",children:l.hostelRoom})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Vehicle Number"}),(0,s.jsx)("p",{className:"text-xl font-semibold text-primary",children:l.vehicleNumber})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Registration Date"}),(0,s.jsx)("p",{className:"text-lg font-medium text-foreground",children:new Date(l.registrationDate).toLocaleDateString()})]})]})}),(0,s.jsx)(r.Button,{onClick:()=>{i("scan"),o(null)},className:"w-full bg-primary hover:bg-primary/90",size:"lg",children:"Scan Another Plate"})]}):null})]})})}e.s(["default",()=>i])}]);