{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acer/OneDrive/Documents/NO%20SQL/PARKING-METERNOSQL-main/lib/mongodb.ts"],"sourcesContent":["import { MongoClient, Db } from \"mongodb\";\n\nconst uri = process.env.MONGODB_URI!;\nconst dbName = process.env.MONGODB_DB_NAME || \"parking_meter\";\n\nlet client: MongoClient | null = null;\nlet db: Db | null = null;\n\nexport async function connectToDatabase() {\n  if (db && client) return { client, db };\n\n  if (!uri) {\n    throw new Error(\"MONGODB_URI is not set\");\n  }\n\n  client = new MongoClient(uri);\n  await client.connect();\n  db = client.db(dbName);\n  return { client, db };\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM,SAAS,QAAQ,GAAG,CAAC,eAAe,IAAI;AAE9C,IAAI,SAA6B;AACjC,IAAI,KAAgB;AAEb,eAAe;IACpB,IAAI,MAAM,QAAQ,OAAO;QAAE;QAAQ;IAAG;IAEtC;;IAIA,SAAS,IAAI,sHAAW,CAAC;IACzB,MAAM,OAAO,OAAO;IACpB,KAAK,OAAO,EAAE,CAAC;IACf,OAAO;QAAE;QAAQ;IAAG;AACtB"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acer/OneDrive/Documents/NO%20SQL/PARKING-METERNOSQL-main/app/api/register/route.ts"],"sourcesContent":["import { connectToDatabase } from \"@/lib/mongodb\";\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const payload = await req.json();\r\n\r\n    const { db } = await connectToDatabase();\r\n\r\n    const result = await db.collection(\"vehicles\").insertOne({\r\n      studentName: payload.studentName,\r\n      usn: payload.usn,\r\n      hostelRoom: payload.hostelRoom,\r\n      vehicleNumber: payload.vehicleNumber,\r\n      licensePlateImage: payload.licensePlateImage,\r\n      registrationDate: new Date(),\r\n    });\r\n\r\n    return new Response(\r\n      JSON.stringify({\r\n        success: true,\r\n        message: \"Vehicle registered successfully\",\r\n        data: { _id: result.insertedId },\r\n      }),\r\n      { status: 201, headers: { \"Content-Type\": \"application/json\" } }\r\n    );\r\n  } catch (err: any) {\r\n    console.error(\"Register API error:\", err);\r\n    return new Response(\r\n      JSON.stringify({\r\n        success: false,\r\n        message: err?.message || \"Internal server error\",\r\n      }),\r\n      { status: 500, headers: { \"Content-Type\": \"application/json\" } }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,UAAU,MAAM,IAAI,IAAI;QAE9B,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,IAAA,0MAAiB;QAEtC,MAAM,SAAS,MAAM,GAAG,UAAU,CAAC,YAAY,SAAS,CAAC;YACvD,aAAa,QAAQ,WAAW;YAChC,KAAK,QAAQ,GAAG;YAChB,YAAY,QAAQ,UAAU;YAC9B,eAAe,QAAQ,aAAa;YACpC,mBAAmB,QAAQ,iBAAiB;YAC5C,kBAAkB,IAAI;QACxB;QAEA,OAAO,IAAI,SACT,KAAK,SAAS,CAAC;YACb,SAAS;YACT,SAAS;YACT,MAAM;gBAAE,KAAK,OAAO,UAAU;YAAC;QACjC,IACA;YAAE,QAAQ;YAAK,SAAS;gBAAE,gBAAgB;YAAmB;QAAE;IAEnE,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,IAAI,SACT,KAAK,SAAS,CAAC;YACb,SAAS;YACT,SAAS,KAAK,WAAW;QAC3B,IACA;YAAE,QAAQ;YAAK,SAAS;gBAAE,gBAAgB;YAAmB;QAAE;IAEnE;AACF"}}]
}