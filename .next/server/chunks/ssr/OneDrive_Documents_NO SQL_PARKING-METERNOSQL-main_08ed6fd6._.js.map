{"version":3,"sources":["../../../../../../../../OneDrive/Documents/NO%20SQL/PARKING-METERNOSQL-main/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../../../OneDrive/Documents/NO%20SQL/PARKING-METERNOSQL-main/components/camera-capture.tsx","../../../../../../../../OneDrive/Documents/NO%20SQL/PARKING-METERNOSQL-main/app/dashboard/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","\"use client\"\n\nimport { useEffect, useRef, useState } from \"react\"\n\ninterface CameraCaptureProps {\n  onCapture: (imageData: string) => void\n  isLoading?: boolean\n}\n\nexport function CameraCapture({ onCapture, isLoading = false }: CameraCaptureProps) {\n  const videoRef = useRef<HTMLVideoElement>(null)\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n\n  const [hasPermission, setHasPermission] = useState<boolean>(false)\n  const [isUnsupported, setIsUnsupported] = useState(false)\n\n  useEffect(() => {\n    const requestCameraAccess = async () => {\n      if (\n        typeof navigator === \"undefined\" ||\n        typeof navigator.mediaDevices === \"undefined\" ||\n        typeof navigator.mediaDevices.getUserMedia === \"undefined\"\n      ) {\n        console.warn(\"Camera API is not supported in this browser.  Please ensure your browser supports the camera API and that it is enabled.\");\n        setIsUnsupported(true);\n        setHasPermission(false);\n        return;\n      }\n\n      try {\n        console.log(\"Requesting camera access...\")\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: { facingMode: \"environment\" },\n        })\n\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream\n          setHasPermission(true)\n        }\n      } catch (err) {\n        console.error(\"Camera access denied:\", err)\n        if (err instanceof DOMException) {\n          console.error(\"DOMException type:\", err.name, err.message)\n        }\n        setHasPermission(false)\n      }\n    }\n\n    requestCameraAccess()\n\n    return () => {\n      if (videoRef.current?.srcObject) {\n        const tracks = (videoRef.current.srcObject as MediaStream).getTracks()\n        tracks.forEach((track) => track.stop())\n      }\n    }\n  }, [])\n\n  const handleCapture = () => {\n    if (canvasRef.current && videoRef.current) {\n      const context = canvasRef.current.getContext(\"2d\")\n      if (context) {\n        const rectWidth = 256\n        const rectHeight = 96\n\n        const sx = (videoRef.current.videoWidth - rectWidth) / 2\n        const sy = (videoRef.current.videoHeight - rectHeight) / 2\n\n        canvasRef.current.width = rectWidth\n        canvasRef.current.height = rectHeight\n\n        context.drawImage(\n          videoRef.current,\n          sx,\n          sy,\n          rectWidth,\n          rectHeight,\n          0,\n          0,\n          rectWidth,\n          rectHeight\n        )\n\n        const imageData = canvasRef.current.toDataURL(\"image/jpeg\")\n        onCapture(imageData)\n      }\n    }\n  }\n\n  if (isUnsupported) {\n    const ua = typeof navigator !== \"undefined\" ? navigator.userAgent.toLowerCase() : \"\"\n    const isBraveAndroid = ua.includes(\"brave\") && ua.includes(\"android\")\n\n    return (\n      <div className=\"p-8 text-center border rounded-md\">\n        <p className=\"text-red-500 mb-4\">\n          {isBraveAndroid\n            ? \"Camera is not fully supported on this version of Brave for Android. Please try a different browser.\"\n            : \"Camera is not supported on this browser. Please use a different browser.\"}\n        </p>\n      </div>\n    )\n  }\n\n  if (!hasPermission) {\n    return (\n      <div className=\"p-8 text-center border rounded-md\">\n        <p className=\"mb-4\">Please allow camera permission in your browser.</p>\n      </div>\n    )\n  }\n\n  if (hasPermission === null) {\n    return <div className=\"p-8 text-center border rounded-md\">Requesting camera access...</div>\n  }\n\n  return (\n    <div>\n      <div className=\"p-4 text-center border rounded-md space-y-4\">\n        <video\n          ref={videoRef}\n          autoPlay\n          playsInline\n          className=\"mx-auto rounded-md max-w-full\"\n        />\n        <canvas ref={canvasRef} className=\"hidden\" />\n        <button\n          type=\"button\"\n          onClick={handleCapture}\n          disabled={isLoading}\n          className=\"px-4 py-2 rounded-md border disabled:opacity-50\"\n        >\n          {isLoading ? \"Capturing...\" : \"Capture\"}\n        </button>\n      </div>\n    </div>\n  )\n}\n","\"use client\"\n\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { CameraCapture } from \"@/components/camera-capture\"\n\ninterface StudentDetails {\n  studentName: string\n  usn: string\n  hostelRoom: string\n  vehicleNumber: string\n  registrationDate: string\n}\n\nexport default function DashboardPage() {\n  const [mode, setMode] = useState<\"scan\" | \"results\">(\"scan\")\n  const [isLoading, setIsLoading] = useState(false)\n  const [studentDetails, setStudentDetails] = useState<StudentDetails | null>(null)\n  const [notFound, setNotFound] = useState(false)\n\n  const handleCapture = async (imageData: string) => {\n    setIsLoading(true)\n    setNotFound(false)\n    try {\n      const response = await fetch(\"/api/scan\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ licensePlateImage: imageData }),\n      })\n\n      const data = await response.json()\n      if (data.success && data.student) {\n        setStudentDetails(data.student)\n        setMode(\"results\")\n      } else {\n        setNotFound(true)\n        setMode(\"results\")\n      }\n    } catch (error) {\n      console.error(\"Scan error:\", error)\n      setNotFound(true)\n      setMode(\"results\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <main className=\"min-h-screen bg-gradient-to-b from-background to-muted py-12\">\n      <div className=\"max-w-2xl mx-auto px-4\">\n        {/* Header */}\n        <div className=\"mb-12\">\n          <h1 className=\"text-4xl font-bold text-foreground mb-2\">Vehicle Verification</h1>\n          <p className=\"text-muted-foreground\">\n            Scan a license plate to verify vehicle registration and view student details.\n          </p>\n        </div>\n\n        {mode === \"scan\" && (\n          <Card className=\"p-8 space-y-6\">\n            <h2 className=\"text-2xl font-semibold\">Scan License Plate</h2>\n            <CameraCapture onCapture={handleCapture} isLoading={isLoading} />\n          </Card>\n        )}\n\n        {mode === \"results\" && (\n          <div className=\"space-y-6\">\n            {notFound ? (\n              <Card className=\"p-8 text-center space-y-6 border-red-200 bg-red-50\">\n                <div className=\"text-5xl\">❌</div>\n                <div>\n                  <h2 className=\"text-2xl font-semibold text-red-900 mb-2\">Vehicle Not Registered</h2>\n                  <p className=\"text-red-700\">\n                    This license plate is not registered in our system. Please contact the parking office.\n                  </p>\n                </div>\n                <Button onClick={() => setMode(\"scan\")} className=\"w-full bg-primary hover:bg-primary/90\" size=\"lg\">\n                  Scan Another Plate\n                </Button>\n              </Card>\n            ) : studentDetails ? (\n              <Card className=\"p-8 space-y-6 border-green-200 bg-green-50\">\n                <div className=\"text-center\">\n                  <div className=\"text-5xl mb-2\">✅</div>\n                  <h2 className=\"text-2xl font-semibold text-green-900\">Vehicle Registered</h2>\n                </div>\n                <div className=\"bg-white p-6 rounded-lg space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Student Name</p>\n                      <p className=\"text-xl font-semibold text-foreground\">{studentDetails.studentName}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">USN</p>\n                      <p className=\"text-xl font-semibold text-foreground\">{studentDetails.usn}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Hostel Room</p>\n                      <p className=\"text-xl font-semibold text-foreground\">{studentDetails.hostelRoom}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Vehicle Number</p>\n                      <p className=\"text-xl font-semibold text-primary\">{studentDetails.vehicleNumber}</p>\n                    </div>\n                    <div className=\"md:col-span-2\">\n                      <p className=\"text-sm text-muted-foreground\">Registration Date</p>\n                      <p className=\"text-lg font-medium text-foreground\">\n                        {new Date(studentDetails.registrationDate).toLocaleDateString()}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                <Button\n                  onClick={() => {\n                    setMode(\"scan\")\n                    setStudentDetails(null)\n                  }}\n                  className=\"w-full bg-primary hover:bg-primary/90\"\n                  size=\"lg\"\n                >\n                  Scan Another Plate\n                </Button>\n              </Card>\n            ) : null}\n          </div>\n        )}\n      </div>\n    </main>\n  )\n}\n"],"names":["module","exports","require","vendored","ReactJsxRuntime"],"mappings":"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","ignoreList":[0]}