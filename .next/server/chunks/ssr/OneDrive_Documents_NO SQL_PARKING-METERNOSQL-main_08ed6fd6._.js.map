{"version":3,"sources":["../../../../../../../../OneDrive/Documents/NO%20SQL/PARKING-METERNOSQL-main/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../../../OneDrive/Documents/NO%20SQL/PARKING-METERNOSQL-main/components/camera-capture.tsx","../../../../../../../../OneDrive/Documents/NO%20SQL/PARKING-METERNOSQL-main/app/dashboard/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","\"use client\"\n\nimport { useEffect, useRef, useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\n\ninterface CameraCaptureProps {\n  onCapture: (imageData: string) => void\n  isLoading?: boolean\n}\n\nexport function CameraCapture({ onCapture, isLoading = false }: CameraCaptureProps) {\n  const videoRef = useRef<HTMLVideoElement>(null)\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const [hasPermission, setHasPermission] = useState<boolean>(true)\n  const [isCameraActive, setIsCameraActive] = useState(false)\n\n  useEffect(() => {\n    const requestCameraAccess = async () => {\n      try {\n        console.log(\"Requesting camera access...\");\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: { facingMode: \"environment\" },\n        })\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream\n          setHasPermission(true)\n        }\n      } catch (err) {\n        console.error(\"Camera access denied:\", err)\n        setHasPermission(false)\n      }\n    }\n\n    requestCameraAccess()\n\n    return () => {\n      if (videoRef.current?.srcObject) {\n        const tracks = (videoRef.current.srcObject as MediaStream).getTracks()\n        tracks.forEach((track) => track.stop())\n      }\n    }\n  }, [])\n\n  const handleCapture = () => {\n    if (canvasRef.current && videoRef.current) {\n      const context = canvasRef.current.getContext(\"2d\")\n      if (context) {\n        canvasRef.current.width = videoRef.current.videoWidth\n        canvasRef.current.height = videoRef.current.videoHeight\n        context.drawImage(videoRef.current, 0, 0)\n        const imageData = canvasRef.current.toDataURL(\"image/jpeg\")\n        onCapture(imageData)\n      }\n    }\n  }\n\n  if (hasPermission === false) {\n    return (\n      <Card className=\"p-8 text-center\">\n        <p className=\"text-red-500 mb-4\">\n          Camera permission denied. Please enable camera access in your browser settings.\n        </p>\n      </Card>\n    )\n  }\n\n  if (hasPermission === null) {\n    return <Card className=\"p-8 text-center\">Requesting camera access...</Card>\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"relative rounded-lg overflow-hidden border-2 border-primary/30 bg-black\">\n        <video ref={videoRef} autoPlay playsInline className=\"w-full aspect-video object-cover\" />\n        <canvas ref={canvasRef} className=\"hidden\" />\n        <div className=\"absolute inset-0 pointer-events-none\">\n          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\">\n            <div className=\"w-64 h-24 border-2 border-yellow-400 rounded-lg opacity-75\"></div>\n          </div>\n        </div>\n      </div>\n      <Button onClick={handleCapture} disabled={isLoading} className=\"w-full bg-primary hover:bg-primary/90\" size=\"lg\">\n        {isLoading ? \"Processing...\" : \"Capture License Plate\"}\n      </Button>\n    </div>\n  )\n}\n","\"use client\"\n\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { CameraCapture } from \"@/components/camera-capture\"\n\ninterface StudentDetails {\n  studentName: string\n  usn: string\n  hostelRoom: string\n  vehicleNumber: string\n  registrationDate: string\n}\n\nexport default function DashboardPage() {\n  const [mode, setMode] = useState<\"scan\" | \"results\">(\"scan\")\n  const [isLoading, setIsLoading] = useState(false)\n  const [studentDetails, setStudentDetails] = useState<StudentDetails | null>(null)\n  const [notFound, setNotFound] = useState(false)\n\n  const handleCapture = async (imageData: string) => {\n    setIsLoading(true)\n    setNotFound(false)\n    try {\n      const response = await fetch(\"/api/scan\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ licensePlateImage: imageData }),\n      })\n\n      const data = await response.json()\n      if (data.success && data.student) {\n        setStudentDetails(data.student)\n        setMode(\"results\")\n      } else {\n        setNotFound(true)\n        setMode(\"results\")\n      }\n    } catch (error) {\n      console.error(\"Scan error:\", error)\n      setNotFound(true)\n      setMode(\"results\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <main className=\"min-h-screen bg-gradient-to-b from-background to-muted py-12\">\n      <div className=\"max-w-2xl mx-auto px-4\">\n        {/* Header */}\n        <div className=\"mb-12\">\n          <h1 className=\"text-4xl font-bold text-foreground mb-2\">Vehicle Verification</h1>\n          <p className=\"text-muted-foreground\">\n            Scan a license plate to verify vehicle registration and view student details.\n          </p>\n        </div>\n\n        {mode === \"scan\" && (\n          <Card className=\"p-8 space-y-6\">\n            <h2 className=\"text-2xl font-semibold\">Scan License Plate</h2>\n            <CameraCapture onCapture={handleCapture} isLoading={isLoading} />\n          </Card>\n        )}\n\n        {mode === \"results\" && (\n          <div className=\"space-y-6\">\n            {notFound ? (\n              <Card className=\"p-8 text-center space-y-6 border-red-200 bg-red-50\">\n                <div className=\"text-5xl\">❌</div>\n                <div>\n                  <h2 className=\"text-2xl font-semibold text-red-900 mb-2\">Vehicle Not Registered</h2>\n                  <p className=\"text-red-700\">\n                    This license plate is not registered in our system. Please contact the parking office.\n                  </p>\n                </div>\n                <Button onClick={() => setMode(\"scan\")} className=\"w-full bg-primary hover:bg-primary/90\" size=\"lg\">\n                  Scan Another Plate\n                </Button>\n              </Card>\n            ) : studentDetails ? (\n              <Card className=\"p-8 space-y-6 border-green-200 bg-green-50\">\n                <div className=\"text-center\">\n                  <div className=\"text-5xl mb-2\">✅</div>\n                  <h2 className=\"text-2xl font-semibold text-green-900\">Vehicle Registered</h2>\n                </div>\n                <div className=\"bg-white p-6 rounded-lg space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Student Name</p>\n                      <p className=\"text-xl font-semibold text-foreground\">{studentDetails.studentName}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">USN</p>\n                      <p className=\"text-xl font-semibold text-foreground\">{studentDetails.usn}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Hostel Room</p>\n                      <p className=\"text-xl font-semibold text-foreground\">{studentDetails.hostelRoom}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Vehicle Number</p>\n                      <p className=\"text-xl font-semibold text-primary\">{studentDetails.vehicleNumber}</p>\n                    </div>\n                    <div className=\"md:col-span-2\">\n                      <p className=\"text-sm text-muted-foreground\">Registration Date</p>\n                      <p className=\"text-lg font-medium text-foreground\">\n                        {new Date(studentDetails.registrationDate).toLocaleDateString()}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                <Button\n                  onClick={() => {\n                    setMode(\"scan\")\n                    setStudentDetails(null)\n                  }}\n                  className=\"w-full bg-primary hover:bg-primary/90\"\n                  size=\"lg\"\n                >\n                  Scan Another Plate\n                </Button>\n              </Card>\n            ) : null}\n          </div>\n        )}\n      </div>\n    </main>\n  )\n}\n"],"names":["module","exports","require","vendored","ReactJsxRuntime"],"mappings":"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","ignoreList":[0]}