module.exports=[85930,(a,b,c)=>{"use strict";b.exports=a.r(22912).vendored["react-ssr"].ReactJsxRuntime},16696,a=>{"use strict";var b=a.i(85930),c=a.i(49050),d=a.i(88746),e=a.i(62413);function f({onCapture:a,isLoading:f=!1}){let g=(0,c.useRef)(null),h=(0,c.useRef)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1);return((0,c.useEffect)(()=>((async()=>{try{console.log("Requesting camera access...");let a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});g.current&&(g.current.srcObject=a,j(!0))}catch(a){console.error("Camera access denied:",a),j(!1)}})(),()=>{g.current?.srcObject&&g.current.srcObject.getTracks().forEach(a=>a.stop())}),[]),!1===i)?(0,b.jsx)(e.Card,{className:"p-8 text-center",children:(0,b.jsx)("p",{className:"text-red-500 mb-4",children:"Camera permission denied. Please enable camera access in your browser settings."})}):null===i?(0,b.jsx)(e.Card,{className:"p-8 text-center",children:"Requesting camera access..."}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative rounded-lg overflow-hidden border-2 border-primary/30 bg-black",children:[(0,b.jsx)("video",{ref:g,autoPlay:!0,playsInline:!0,className:"w-full aspect-video object-cover"}),(0,b.jsx)("canvas",{ref:h,className:"hidden"}),(0,b.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,b.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,b.jsx)("div",{className:"w-64 h-24 border-2 border-yellow-400 rounded-lg opacity-75"})})})]}),(0,b.jsx)(d.Button,{onClick:()=>{if(h.current&&g.current){let b=h.current.getContext("2d");b&&(h.current.width=g.current.videoWidth,h.current.height=g.current.videoHeight,b.drawImage(g.current,0,0),a(h.current.toDataURL("image/jpeg")))}},disabled:f,className:"w-full bg-primary hover:bg-primary/90",size:"lg",children:f?"Processing...":"Capture License Plate"})]})}a.s(["CameraCapture",()=>f])},33774,a=>{"use strict";var b=a.i(85930),c=a.i(49050),d=a.i(88746),e=a.i(62413),f=a.i(16696);function g(){let[a,g]=(0,c.useState)("details"),[h,i]=(0,c.useState)({studentName:"",usn:"",hostelRoom:"",vehicleNumber:""}),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),p=a=>{let{name:b,value:c}=a.target;i(a=>({...a,[b]:c}))},q=async()=>{m(!0);try{(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,licensePlateImage:j})})).ok&&(o("Vehicle registered successfully!"),i({studentName:"",usn:"",hostelRoom:"",vehicleNumber:""}),k(null),g("details"),setTimeout(()=>o(""),3e3))}catch(a){console.error("Registration error:",a)}finally{m(!1)}};return(0,b.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-background to-muted py-12",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,b.jsxs)("div",{className:"mb-12",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Register Your Vehicle"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Complete the registration process to allow your vehicle access to campus parking."})]}),(0,b.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,b.jsx)("div",{className:`flex-1 h-2 rounded-full ${"details"===a||"camera"===a||"preview"===a?"bg-primary":"bg-muted"}`}),(0,b.jsx)("div",{className:`flex-1 h-2 rounded-full ${"camera"===a||"preview"===a?"bg-primary":"bg-muted"}`}),(0,b.jsx)("div",{className:`flex-1 h-2 rounded-full ${"preview"===a?"bg-primary":"bg-muted"}`})]}),n&&(0,b.jsx)(e.Card,{className:"mb-8 p-4 bg-green-50 border-green-200",children:(0,b.jsx)("p",{className:"text-green-800",children:n})}),"details"===a&&(0,b.jsxs)(e.Card,{className:"p-8 space-y-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Student Information"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),(0,b.jsx)("input",{type:"text",name:"studentName",value:h.studentName,onChange:p,placeholder:"Enter your full name",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"USN (University Serial Number)"}),(0,b.jsx)("input",{type:"text",name:"usn",value:h.usn,onChange:p,placeholder:"e.g., 1BM19CS001",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Hostel Room Number"}),(0,b.jsx)("input",{type:"text",name:"hostelRoom",value:h.hostelRoom,onChange:p,placeholder:"e.g., A-201",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Vehicle Number / Registration Plate"}),(0,b.jsx)("input",{type:"text",name:"vehicleNumber",value:h.vehicleNumber,onChange:p,placeholder:"e.g., KA01AB1234",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,b.jsx)(d.Button,{onClick:()=>g("camera"),disabled:!h.studentName||!h.usn||!h.hostelRoom||!h.vehicleNumber,className:"w-full bg-primary hover:bg-primary/90",size:"lg",children:"Next: Capture License Plate"})]}),"camera"===a&&(0,b.jsxs)(e.Card,{className:"p-8 space-y-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Capture License Plate"}),(0,b.jsx)(f.CameraCapture,{onCapture:a=>{k(a),g("preview")},isLoading:l}),(0,b.jsx)(d.Button,{onClick:()=>g("details"),variant:"outline",className:"w-full",size:"lg",children:"Back"})]}),"preview"===a&&j&&(0,b.jsxs)(e.Card,{className:"p-8 space-y-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Review & Confirm"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-muted p-6 rounded-lg space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Student Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Name"}),(0,b.jsx)("p",{className:"font-medium",children:h.studentName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"USN"}),(0,b.jsx)("p",{className:"font-medium",children:h.usn})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Hostel Room"}),(0,b.jsx)("p",{className:"font-medium",children:h.hostelRoom})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Vehicle Number"}),(0,b.jsx)("p",{className:"font-medium",children:h.vehicleNumber})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Captured License Plate"}),(0,b.jsx)("img",{src:j||"/placeholder.svg",alt:"License Plate",className:"w-full rounded-lg border border-border"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(d.Button,{onClick:()=>g("camera"),variant:"outline",className:"flex-1",size:"lg",children:"Recapture"}),(0,b.jsx)(d.Button,{onClick:q,disabled:l,className:"flex-1 bg-primary hover:bg-primary/90",size:"lg",children:l?"Registering...":"Confirm Registration"})]})]})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=OneDrive_Documents_NO%20SQL_PARKING-METERNOSQL-main_795f045e._.js.map