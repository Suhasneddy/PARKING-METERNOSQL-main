module.exports=[85930,(a,b,c)=>{"use strict";b.exports=a.r(22912).vendored["react-ssr"].ReactJsxRuntime},16696,a=>{"use strict";var b=a.i(85930),c=a.i(49050);function d({onCapture:a,isLoading:d=!1}){let e=(0,c.useRef)(null),f=(0,c.useRef)(null),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1);if((0,c.useEffect)(()=>((async()=>{if("undefined"==typeof navigator||void 0===navigator.mediaDevices||void 0===navigator.mediaDevices.getUserMedia){console.warn("Camera API is not supported in this browser.  Please ensure your browser supports the camera API and that it is enabled."),j(!0),h(!1);return}try{console.log("Requesting camera access...");let a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});e.current&&(e.current.srcObject=a,h(!0))}catch(a){console.error("Camera access denied:",a),a instanceof DOMException&&console.error("DOMException type:",a.name,a.message),h(!1)}})(),()=>{e.current?.srcObject&&e.current.srcObject.getTracks().forEach(a=>a.stop())}),[]),i){let a="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",c=a.includes("brave")&&a.includes("android");return(0,b.jsx)("div",{className:"p-8 text-center border rounded-md",children:(0,b.jsx)("p",{className:"text-red-500 mb-4",children:c?"Camera is not fully supported on this version of Brave for Android. Please try a different browser.":"Camera is not supported on this browser. Please use a different browser."})})}return g?null===g?(0,b.jsx)("div",{className:"p-8 text-center border rounded-md",children:"Requesting camera access..."}):(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"p-4 text-center border rounded-md space-y-4",children:[(0,b.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0,className:"mx-auto rounded-md max-w-full"}),(0,b.jsx)("canvas",{ref:f,className:"hidden"}),(0,b.jsx)("button",{type:"button",onClick:()=>{if(f.current&&e.current){let b=f.current.getContext("2d");if(b){let c=(e.current.videoWidth-256)/2,d=(e.current.videoHeight-96)/2;f.current.width=256,f.current.height=96,b.drawImage(e.current,c,d,256,96,0,0,256,96),a(f.current.toDataURL("image/jpeg"))}}},disabled:d,className:"px-4 py-2 rounded-md border disabled:opacity-50",children:d?"Capturing...":"Capture"})]})}):(0,b.jsx)("div",{className:"p-8 text-center border rounded-md",children:(0,b.jsx)("p",{className:"mb-4",children:"Please allow camera permission in your browser."})})}a.s(["CameraCapture",()=>d])},33774,a=>{"use strict";var b=a.i(85930),c=a.i(4072),d=a.i(49050),e=a.i(88746),f=a.i(62413),g=a.i(16696);function h(){let a=(0,c.useRouter)(),[h,i]=(0,d.useState)("details"),[j,k]=(0,d.useState)({studentName:"John Doe",usn:"1BM19CS001",hostelRoom:"A-201",vehicleNumber:"KA01AB1234"}),[l,m]=(0,d.useState)(null),[n,o]=(0,d.useState)(!1),[p,q]=(0,d.useState)(null),r=a=>{let{name:b,value:c}=a.target;k(a=>({...a,[b]:c}))};async function s(){try{o(!0),q(null);let b=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...j,licensePlateImage:l})}),c=await b.json();if(!b.ok||!c.success)throw Error(c.message||"Failed to register");a.push("/dashboard")}catch(a){console.error("Confirm registration failed:",a),q(a?.message||"Something went wrong")}finally{o(!1)}}return(0,b.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-background to-muted py-12",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,b.jsxs)("div",{className:"mb-12",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Register Your Vehicle"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Complete the registration process to allow your vehicle access to campus parking."})]}),(0,b.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,b.jsx)("div",{className:`flex-1 h-2 rounded-full ${"details"===h||"camera"===h||"preview"===h?"bg-primary":"bg-muted"}`}),(0,b.jsx)("div",{className:`flex-1 h-2 rounded-full ${"camera"===h||"preview"===h?"bg-primary":"bg-muted"}`}),(0,b.jsx)("div",{className:`flex-1 h-2 rounded-full ${"preview"===h?"bg-primary":"bg-muted"}`})]}),"details"===h&&(0,b.jsxs)(f.Card,{className:"p-8 space-y-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Student Information"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),(0,b.jsx)("input",{type:"text",name:"studentName",value:j.studentName,onChange:r,placeholder:"Enter your full name",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"USN (University Serial Number)"}),(0,b.jsx)("input",{type:"text",name:"usn",value:j.usn,onChange:r,placeholder:"e.g., 1BM19CS001",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Hostel Room Number"}),(0,b.jsx)("input",{type:"text",name:"hostelRoom",value:j.hostelRoom,onChange:r,placeholder:"e.g., A-201",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Vehicle Number / Registration Plate"}),(0,b.jsx)("input",{type:"text",name:"vehicleNumber",value:j.vehicleNumber,onChange:r,placeholder:"e.g., KA01AB1234",className:"w-full px-4 py-2 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,b.jsx)(e.Button,{onClick:()=>i("camera"),disabled:!j.studentName||!j.usn||!j.hostelRoom||!j.vehicleNumber,className:"w-full bg-primary hover:bg-primary/90",size:"lg",children:"Next: Capture License Plate"})]}),"camera"===h&&(0,b.jsxs)(f.Card,{className:"p-8 space-y-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Capture License Plate"}),(0,b.jsx)(g.CameraCapture,{onCapture:a=>{m(a),i("preview")},isLoading:n}),(0,b.jsx)(e.Button,{onClick:()=>i("details"),variant:"outline",className:"w-full",size:"lg",children:"Back"})]}),"preview"===h&&l&&(0,b.jsxs)(f.Card,{className:"p-8 space-y-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Review & Confirm"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-muted p-6 rounded-lg space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Student Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Name"}),(0,b.jsx)("p",{className:"font-medium",children:j.studentName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"USN"}),(0,b.jsx)("p",{className:"font-medium",children:j.usn})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Hostel Room"}),(0,b.jsx)("p",{className:"font-medium",children:j.hostelRoom})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Vehicle Number"}),(0,b.jsx)("p",{className:"font-medium",children:j.vehicleNumber})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Captured License Plate"}),(0,b.jsx)("img",{src:l||"/placeholder.svg",alt:"License Plate",className:"w-full rounded-lg border border-border"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(e.Button,{onClick:()=>i("camera"),variant:"outline",className:"flex-1",size:"lg",children:"Recapture"}),(0,b.jsx)(e.Button,{onClick:s,disabled:n,className:"flex-1 bg-primary hover:bg-primary/90",size:"lg",children:n?"Registering...":"Confirm Registration"})]}),p&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-4",children:p})]})]})})}a.s(["default",()=>h])}];

//# sourceMappingURL=OneDrive_Documents_NO%20SQL_PARKING-METERNOSQL-main_795f045e._.js.map